<!DOCTYPE html>
<html>
  <head>
    <!--Import Google Icon Font-->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <!-- Compiled and minified CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
    />

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>

  <body>
   <div class="navbar-fixed">
      <nav>
        <div class="nav-wrapper blue darken-4">
          <a href="#!" class="brand-logo">Logo</a>
        </div>
      </nav>
    </div>

    <div class="container">
        <br><br><br><br><br>
         <div class="row ">
            <div class="col offset-m3 s12 m6">
              <div class="card hoverable">
               <div class="row">
                 
                  <div class="card-content white-text">
                     <h3 class="center" style="color:#0d47a1">Login</h3>
                  </div>
                  
               
               </div>
               <div class="row">
                  <div class="input-field col s10 offset-s1">
                    <input id="telefone" type="text" class="validate">
                    <label for="telefone">Telefone</label>
                  </div>
                </div>
                <div class="row">
                  <div class="input-field col s10 offset-s1">
                    <input id="senha" type="password" class="validate">
                    <label for="senha">Senha</label>
                  </div>
                </div>
                <div class="row">
                  <a class="waves-effect waves-light btn blue darken-4 col s4 offset-s4" id="logar"><i class="material-icons right">send</i>Logar</a>
                </div>
                <br>
                </div>
              </div>
            </div>
         </div>

    </div>
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
       M.AutoInit();
      window.addEventListener('load', init)

      function init(){
         document.querySelector('#logar').addEventListener('click', logar);
         
      }

      function logar(){
         let telefone = document.querySelector('#telefone').value;
         let senha = document.querySelector('#senha').value;
         console.log('Usuario: '+telefone)
         console.log('Senha: '+ senha)
        

         fetch('/login',{
            method: 'POST',
            headers: {
              'Accept': 'application/json',
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
               telefone: telefone,
               senha: senha
            })
         })
         .then(response =>{
            console.log("resposta: ", response)
            return response.json()
         })
         .then(data=>{
            console.log("DATA: ", data.token)
         })
         .catch(error=>{
            console.error('ERROR ', error)
         })
      }
    </script>
  </body>
</html>
